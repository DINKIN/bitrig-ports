$OpenBSD: patch-src_ptlib_unix_svcproc_cxx,v 1.1.1.1 2010/03/23 21:10:17 ajacoutot Exp $
--- src/ptlib/unix/svcproc.cxx.orig	Thu Aug 15 01:20:26 2013
+++ src/ptlib/unix/svcproc.cxx	Fri Apr 25 10:20:31 2014
@@ -66,6 +66,10 @@
 #include <sys/resource.h>
 #endif
 
+#ifdef P_OPENBSD
+#include <sys/stdint.h>
+#endif
+
 #define new PNEW
 
 extern void PXSignalHandler(int);
@@ -217,7 +221,8 @@ int PServiceProcess::InitialiseService()
     pid_t pid;
 
     {
-      ifstream pidfile(pidfilename);
+      std::string pidfilenamestr = pidfilename;
+      ifstream pidfile(pidfilenamestr);
       if (!pidfile.is_open()) {
         cout << "Could not open pid file: \"" << pidfilename << "\""
                 " - " << strerror(errno) << endl;
@@ -384,7 +389,8 @@ int PServiceProcess::InitialiseService()
   // Run as a daemon, ie fork
 
   if (!pidfilename) {
-    ifstream pidfile(pidfilename);
+    std::string pidfilenamestr = pidfilename;
+    ifstream pidfile(pidfilenamestr);
     if (pidfile.is_open()) {
       pid_t pid;
       pidfile >> pid;
@@ -412,7 +418,8 @@ int PServiceProcess::InitialiseService()
       cout << "Daemon started with pid " << pid << endl;
       if (!pidfilename) {
         // Write out the child pid to magic file in /var/run (at least for linux)
-        ofstream pidfile(pidfilename);
+        std::string pidfilenamestr = pidfilename;
+        ofstream pidfile(pidfilenamestr);
         if (pidfile.is_open())
           pidfile << pid;
         else
