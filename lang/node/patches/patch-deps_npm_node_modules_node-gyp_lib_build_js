$OpenBSD$
--- deps/npm/node_modules/node-gyp/lib/build.js.orig	Sun Jul  8 00:15:17 2012
+++ deps/npm/node_modules/node-gyp/lib/build.js	Wed Jul 18 08:26:04 2012
@@ -13,12 +13,16 @@ var fs = require('graceful-fs')
   , mkdirp = require('mkdirp')
   , win = process.platform == 'win32'
   , openbsd = process.platform == 'openbsd'
+  , bitrig = process.platform == 'bitrig'
 
 exports.usage = 'Invokes `' + (win ? 'msbuild' : 'make') + '` and builds the module'
 
 function build (gyp, argv, callback) {
 
-  var makeCommand = openbsd ? 'gmake' : 'make'
+  var makeCommand = 'make'
+  if (openbsd || bitrig) {
+    makeCommand = 'gmake'
+  }
   var command = win ? 'msbuild' : makeCommand
     , buildDir = path.resolve('build')
     , configPath = path.resolve(buildDir, 'config.gypi')
@@ -186,6 +190,8 @@ function build (gyp, argv, callback) {
       argv.push('/p:Configuration=' + buildType + ';Platform=' + p)
     } else {
       argv.push('BUILDTYPE=' + buildType)
+      // Don't hide compiler commands
+      argv.push('V=1')
       // Invoke the Makefile in the 'build' dir.
       argv.push('-C')
       argv.push('build')
