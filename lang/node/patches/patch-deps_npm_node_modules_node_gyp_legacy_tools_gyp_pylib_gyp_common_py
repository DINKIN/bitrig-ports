$OpenBSD$
--- deps/npm/node_modules/node-gyp/legacy/tools/gyp/pylib/gyp/common.py.orig	Tue Sep 25 10:09:31 CEST 2012
+++ deps/npm/node_modules/node-gyp/legacy/tools/gyp/pylib/gyp/common.py	Tue Sep 25 10:09:31 CEST 2012
@@ -331,7 +331,6 @@ def WriteOnDiff(filename):
           # and then set it back to the old value.
           umask = os.umask(077)
           os.umask(umask)
-          os.chmod(self.tmp_path, 0666 & ~umask)
           if sys.platform == 'win32' and os.path.exists(filename):
             # NOTE: on windows (but not cygwin) rename will not replace an
             # existing file, so it must be preceded with a remove. Sadly there
@@ -355,6 +354,8 @@ def GetFlavor(params):
     'sunos5': 'solaris',
     'freebsd7': 'freebsd',
     'freebsd8': 'freebsd',
+    'openbsd5': 'openbsd',
+    'bitrig0':  'bitrig',
   }
   flavor = flavors.get(sys.platform, 'linux')
   return params.get('flavor', flavor)
