--- Modules/socketmodule.c.orig	Fri Apr 18 01:36:15 2014
+++ Modules/socketmodule.c	Fri Apr 18 01:37:25 2014
@@ -156,7 +156,7 @@ if_indextoname(index) -- return the corresponding inte
 # undef HAVE_GETHOSTBYNAME_R_6_ARG
 #endif
 
-#if defined(__OpenBSD__)
+#if defined(__OpenBSD__) || defined(__Bitrig__)
 # include <sys/uio.h>
 #endif
 
@@ -189,7 +189,7 @@ if_indextoname(index) -- return the corresponding inte
    (this includes the getaddrinfo emulation) protect access with a lock. */
 #if defined(WITH_THREAD) && (defined(__APPLE__) || \
     (defined(__FreeBSD__) && __FreeBSD_version+0 < 503000) || \
-    defined(__OpenBSD__) || defined(__NetBSD__) || \
+    defined(__OpenBSD__) || defined(__Bitrig__) || defined(__NetBSD__) || \
     defined(__VMS) || !defined(HAVE_GETADDRINFO))
 #define USE_GETADDRINFO_LOCK
 #endif
